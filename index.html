<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>南京三日行程規劃</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap');

        body {
            font-family: 'Roboto', 'Noto Sans TC', sans-serif;
            -webkit-tap-highlight-color: transparent;
            background-color: #fef7ff;
            /* M3 Surface */
        }

        /* Custom Scrollbar Hiding */
        .custom-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .custom-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.2, 0.0, 0, 1.0) forwards;
            opacity: 0;
        }

        .slide-up {
            animation: slideUp 0.6s cubic-bezier(0.2, 0.0, 0, 1.0) forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Modal transitions */
        .modal-enter {
            transform: translateY(0) !important;
        }

        .backdrop-enter {
            opacity: 1 !important;
            pointer-events: auto !important;
        }

        /* M3 Elevation & States */
        .m3-card {
            background-color: #f8effc;
            /* Surface Container Low - Updated per user preference */
            transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s;
        }

        .m3-card:active {
            background-color: #e2e2e9;
            /* Surface Container High */
            transform: scale(0.98);
        }

        .m3-chip {
            border: 1px solid transparent;
        }
    </style>
</head>

<body class="text-[#1d1b20] selection:bg-[#e8def8] selection:text-[#1d1b20] pb-24 touch-manipulation">

    <!-- Small Top App Bar -->
    <div
        class="sticky top-0 z-20 bg-[#fef7ff]/95 backdrop-blur-md border-b border-[#cac4d0]/50 transition-all duration-200">
        <div class="max-w-md mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="flex flex-col">
                    <h1 class="text-[22px] leading-7 font-normal text-[#1d1b20]">南京行程</h1>
                    <p class="text-xs font-medium text-[#49454f] tracking-wide">Dec 29 - 31</p>
                </div>
            </div>

            <button
                class="w-10 h-10 rounded-full flex items-center justify-center text-[#49454f] hover:bg-[#1d1b20]/[0.08] active:bg-[#1d1b20]/[0.12] transition-colors">
                <i data-lucide="share-2" width="24"></i>
            </button>
        </div>
    </div>

    <!-- Main Schedule Container -->
    <div id="app-container" class="px-4 pt-4 space-y-8 max-w-md mx-auto">
        <!-- Content injected by JS -->
    </div>

    <!-- Scrim (Backdrop) -->
    <div id="modal-backdrop" onclick="closeModal()"
        class="fixed inset-0 z-50 bg-[#1d1b20]/40 backdrop-blur-[2px] transition-opacity duration-300 opacity-0 pointer-events-none">
    </div>

    <!-- Modal (Standard Bottom Sheet) -->
    <div id="modal-sheet"
        class="fixed inset-x-0 bottom-0 z-50 flex justify-center pointer-events-none transition-transform duration-400 ease-[cubic-bezier(0.2,0,0,1)] translate-y-full">
        <!-- Material Surface Container Low/Lowest -->
        <div
            class="bg-[#f7f2fa] w-full max-w-md rounded-t-[28px] shadow-[0_-4px_20px_-5px_rgba(0,0,0,0.15)] overflow-hidden relative flex flex-col max-h-[92vh] pointer-events-auto">

            <!-- Drag Handle -->
            <div class="w-full flex justify-center pt-4 pb-2" onclick="closeModal()">
                <div class="w-8 h-1 bg-[#79747e] rounded-full opacity-40"></div>
            </div>

            <!-- Modal Content -->
            <div id="modal-content" class="overflow-y-auto pb-12 custom-scrollbar">
                <!-- Injected by JS -->
            </div>
        </div>
    </div>

    <script>
        // --- Data Source ---
        const scheduleData = [
            {
                date: "12/29",
                day: "第一天",
                theme: "金陵帝王氣",
                sections: [
                    {
                        period: "早上",
                        spots: [
                            {
                                name: "玄武湖",
                                timeDisplay: "全天開放",
                                bookingStatus: null,
                                shortDesc: "金陵明珠，皇家園林",
                                mustVisit: ["環洲煙柳", "櫻洲花海", "菱洲", "從湖面看城牆"],
                                detail: {
                                    year: "始於秦漢 (約西元前200年)",
                                    title: "中國僅存的江南皇家園林",
                                    history: "玄武湖古名桑泊，距今已有兩千三百多年歷史。在六朝時期，這裡是皇家園林及操練水軍的重地，見證了無數帝王的興衰。明朝開國皇帝朱元璋定都南京後，將玄武湖闢為存放國家戶籍檔案（黃冊）的禁地，稱為「黃冊庫」，嚴禁百姓進入，長達兩百六十餘年，直至清末才重新對外開放。1909年，兩江總督端方將其闢為「五洲公園」。",
                                    features: "湖面寬闊，水岸呈菱形，周長約10公里。湖中分佈著環洲、櫻洲、菱洲、梁洲、翠洲五座島嶼，各具特色，以堤橋相連。環洲煙柳依依，櫻洲花海如潮。這裡不僅是南京最大的文化休閒公園，更是欣賞南京明城牆天際線的最佳角度，巍峨城牆與波光粼粼的湖水相映成趣。",
                                    highlight: "推薦沿著環洲漫步，這裡是中國歷代皇室保留最完整的城市湖泊公園。特別是從「台城」段眺望，可以同時看到湖光山色與現代化的南京天際線，感受古今交融的獨特魅力。"
                                }
                            },
                            {
                                name: "雞鳴寺",
                                timeDisplay: "17:00 閉園",
                                bookingStatus: null,
                                shortDesc: "南朝四百八十寺之首",
                                mustVisit: ["藥師佛塔", "古胭脂井", "素齋麵館", "櫻花大道"],
                                detail: {
                                    year: "始建於西晉永康元年 (西元300年)",
                                    title: "南朝第一寺，皇室佛緣",
                                    history: "雞鳴寺前身是三國東吳的棲玄寺，後成為南朝梁武帝蕭衍興建的同泰寺。梁武帝篤信佛教，曾在此四次「捨身」出家，使這裡成為當時中國南方的佛教中心，號稱「南朝四百八十寺」之首。寺內的「胭脂井」更是見證了陳後主與妃子張麗華在隋軍攻入時藏身井中的亡國之痛，歷史的唏噓感極強。",
                                    features: "寺廟依雞籠山而建，錯落有致，亮黃色的牆體與黑色的瓦片在南京的寺廟中獨樹一幟，極具辨識度。寺內高聳的藥師佛塔是南京城北的地標建築，塔身七層八面，工藝精湛。每年春天，寺前的櫻花大道盛開，彷彿粉色的雲霞，美不勝收。",
                                    highlight: "「南朝四百八十寺，多少樓台煙雨中」，雞鳴寺即是這句千古絕唱的靈感來源與核心代表。這裡香火極旺，據說求姻緣特別靈驗。遊覽結束後，不妨在寺內的百味齋嚐一碗素麵，湯頭鮮美，回味無窮。"
                                }
                            },
                            {
                                name: "南京城牆",
                                timeDisplay: "21:00 閉園",
                                bookingStatus: null,
                                shortDesc: "世界第一大城垣",
                                mustVisit: ["登城口", "城磚銘文", "遠眺紫金山", "城牆博物館"],
                                detail: {
                                    year: "始建於西元1366年",
                                    title: "世界最長、規模最大、保存最原真的古城垣",
                                    history: "朱元璋採納謀士朱升「高築牆」的建議，動用全國5部162個縣的百姓，耗費3.5億塊城磚，歷時28年建成。不同於北京、西安城牆的方形規制，南京城牆依山傍水，隨地形蜿蜒，形成了獨特的防禦體系。每一塊城磚上都刻有燒製者與監造官的名字，建立了嚴格的「物勒工名」責任追究制度。",
                                    features: "現存城牆長達25公里，牆體厚實堅固，經歷六百多年風雨仍屹立不倒。城牆不僅是軍事防線，更是南京城的骨架。登上城牆，一邊是現代化的都市高樓，一邊是滄桑的古色古香，古今交融的視覺衝擊令人震撼。",
                                    highlight: "推薦從雞鳴寺段登城，可以俯瞰玄武湖全景，遠眺紫金山，視野極佳。仔細觀察城磚上的銘文，那是六百年前工匠們留下的指紋與體溫，是歷史最真實的觸感。"
                                }
                            },
                            {
                                name: "明故宮遺址公園",
                                timeDisplay: "18:30 閉園",
                                bookingStatus: null,
                                shortDesc: "北京故宮的藍本",
                                mustVisit: ["午門五鳳樓", "奉天殿石基", "內五龍橋", "巨型石柱礎"],
                                detail: {
                                    year: "始建於明洪武年間 (西元1366年)",
                                    title: "中世紀世界最大的宮殿建築群",
                                    history: "明故宮是北京紫禁城的原型與藍本。朱元璋在此登基，開創了明清兩代宮殿建築的最高規格。雖然地面宏偉建築在清軍入關及太平天國戰火中損毀嚴重，但其基礎佈局深刻影響了後世的都城規劃。這裡是明朝前三代皇帝（朱元璋、朱允炆、朱棣）治理天下的核心。",
                                    features: "遺跡中保留最完整的是午門（五鳳樓）、內五龍橋和巨大的石柱礎。從那些巨大的盤龍石基，仍可想像當年的奉天殿是何等恢弘氣勢。公園內綠樹成蔭，常有老人在此鍛鍊，歷史的滄桑與市民的生活氣息在此奇妙共存。",
                                    highlight: "這裡是中國古代都城宮殿建築的集大成者，被譽為「北京故宮之母」。漫步在巨大的石基之間，彷彿能聽到歷史的迴響，適合喜歡考古與懷古的旅人。"
                                }
                            },
                            {
                                name: "國民政府主席官邸",
                                timeDisplay: "18:00 閉館",
                                bookingStatus: "已預約",
                                shortDesc: "美齡宮，遠東第一別墅",
                                mustVisit: ["空中項鍊俯覽", "蔣宋臥室", "凱迪拉克", "地下廚房"],
                                detail: {
                                    year: "建成於1934年",
                                    title: "蔣介石與宋美齡的官邸",
                                    history: "正式名稱為「國民政府主席官邸」，因蔣介石與宋美齡常居於此，俗稱「美齡宮」。這裡不僅是他們的私宅，也是接待外國貴賓的重要外交場所，見證了民國「黃金十年」的外交風雲與政治生活。抗戰期間曾遭破壞，後經修復。",
                                    features: "建築風格中西合璧，外觀是傳統的中國宮殿式大屋頂，覆蓋綠色琉璃瓦（等級僅次於皇家的黃色），內部則是豪華的西式別墅裝修，有西式壁爐、落地窗與摩登家具。最為人稱道的是，從高空俯瞰，陵園路兩旁的法國梧桐如同一條金色的項鍊，而美齡宮正是這條項鍊上最璀璨的綠寶石。",
                                    highlight: "被譽為「遠東第一別墅」，其設計細節極盡考究，地下層的現代化廚房在當時是極為先進的設施。這裡展現了民國時期頂級的審美與工藝，是了解民國上層生活方式的絕佳窗口。"
                                }
                            }
                        ]
                    },
                    {
                        period: "晚上",
                        spots: [
                            {
                                name: "中華門 (甕城)",
                                timeDisplay: "21:00 閉園",
                                bookingStatus: null,
                                shortDesc: "天下第一甕城",
                                mustVisit: ["藏兵洞", "千斤閘遺跡", "馬道", "甕城結構"],
                                detail: {
                                    year: "建於明初 (西元1366年-1386年)",
                                    title: "世界上保存最完整的地下軍事要塞",
                                    history: "中華門原名聚寶門，是南京城牆十三座城門中最大、最雄偉的一座。其設計初衷是為了能在戰時「誘敵深入、聚而殲之」。這裡設有三道甕城、四道拱門，佈局嚴密驚人，每一道門都設有千斤閘，是古代防禦工程的巔峰之作。",
                                    features: "最令人驚嘆的是城門內的「藏兵洞」，共有 27 個，可容納 3,000 名伏兵。這些洞穴冬暖夏涼，並設有精妙的通風口與傳聲孔，保證了士兵在圍城戰中能長期生存並保持戰鬥力。馬道寬闊，可供騎兵直接衝上城頭。",
                                    highlight: "藏兵洞的規模與設計精密度為中國首位。親身走入洞中，能強烈感受到古代戰爭的緊張氛圍與防禦工事的宏大。夜遊中華門，燈光打在古老的城磚上，更添幾分歷史的厚重感。"
                                }
                            },
                            {
                                name: "老門東",
                                timeDisplay: "全天開放",
                                bookingStatus: "推薦",
                                shortDesc: "最南京的市井煙火",
                                mustVisit: ["駿惠書屋", "金陵刻經處", "梅花糕", "芥子園"],
                                detail: {
                                    year: "追溯至三國時期 (西元220年)",
                                    title: "南京老城南的核心歷史街區",
                                    history: "老門東位於中華門以東，自古是江南商賈雲集、人文薈萃之地。這裡是南京傳統民居保存最完整的區域，見證了老城南的商貿興盛與市井百態。歷史上，這裡是普通百姓的生活區，充滿了濃郁的煙火氣。",
                                    features: "街區內保留了大量明清風格的民居，高高的馬頭牆、青石板路與精緻的花格窗隨處可見，構成了典型的蘇派建築風格。這裡還隱藏著許多文化遺產，如世界非遺「金陵刻經處」，以及清代名士李漁設計的私家園林「芥子園」。",
                                    highlight: "這裡的「梅花糕」、「鴨血粉絲湯」與「小鄭酥燒餅」是公認的南京味蕾名片。在轉角遇見駿惠書屋（先鋒書店），這座由徽派老宅改造的書店，則是另一番文化驚喜，適合放慢腳步細細品味。"
                                }
                            },
                            {
                                name: "夫子廟",
                                timeDisplay: "全天開放",
                                bookingStatus: "推薦",
                                shortDesc: "中國四大文廟之一",
                                mustVisit: ["大成殿", "江南貢院", "烏衣巷", "秦淮河夜景"],
                                detail: {
                                    year: "始建於東晉 (西元337年)",
                                    title: "中國第一所國家最高學府",
                                    history: "夫子廟是孔廟、學宮、貢院組成的龐大建築群。江南貢院曾是中國最大的科舉考場，明清時期全中國半數以上的狀元均出自於此，是士子們「魚躍龍門」之地。烏衣巷更是東晉王導、謝安等豪門望族的居住地，留下了「舊時王謝堂前燕，飛入尋常百姓家」的千古名句。",
                                    features: "建築群依秦淮河而建，形成了「廟在河邊，街在廟旁」的獨特佈局。這裡不僅是儒家文化的聖地，更是秦淮河畔世俗繁華的中心。大成殿內懸掛的匾額、貢院內的號舍，都訴說著古代科舉的艱辛與榮耀。",
                                    highlight: "它是儒家文化與秦淮風情的完美融合。乘坐畫舫夜遊秦淮河，看兩岸燈火輝煌，槳聲燈影中，彷彿能穿越回六朝金粉的繁華歲月。"
                                }
                            }
                        ]
                    }
                ]
            },
            {
                date: "12/30",
                day: "第二天",
                theme: "民國與史詩",
                sections: [
                    {
                        period: "早上",
                        spots: [
                            {
                                name: "南京博物院",
                                timeDisplay: "17:00 閉館",
                                bookingStatus: "已預約",
                                shortDesc: "中國三大博物館之一",
                                mustVisit: ["民國館 (穿越時空)", "金獸 (鎮館之寶)", "大報恩寺琉璃拱門"],
                                detail: {
                                    year: "創建於1933年",
                                    title: "中國第一座由國家投資興建的大型博物館",
                                    history: "前身是蔡元培倡議的國立中央博物院籌備處，與北京故宮、台北故宮並稱為「中國三大博物館」。它歷經戰火與遷徙，最終在南京紮根，館藏文物超過 43 萬件，是中國近代考古學與博物館學的發祥地之一。",
                                    features: "博物院主殿仿遼代宮殿式建築，氣勢恢宏。內部設有歷史館、特展館、數字館、藝術館、民國館、非遺館六大展館。其中地下「民國館」最為獨特，完整還原了 1930 年代南京的街景，包括老火車站、郵局、中藥鋪與茶館，連天空的燈光都會隨時間變化。",
                                    highlight: "「民國館」提供完全沉浸式的體驗，讓人瞬間穿越回民國時期，是拍照打卡的絕佳地點。歷史館中的鎮館之寶「金獸」是中國出土最重的金器，造型奇特；「釉裡紅歲寒三友紋梅瓶」則是全世界僅存的稀世珍寶，不可錯過。"
                                }
                            }
                        ]
                    },
                    {
                        period: "下午",
                        spots: [
                            {
                                name: "總統府",
                                timeDisplay: "17:00 閉園",
                                bookingStatus: "已預約",
                                shortDesc: "半部近代史",
                                mustVisit: ["子超樓", "煦園", "孫中山臨時大總統辦公室", "行政院大樓"],
                                detail: {
                                    year: "明漢王府、清總督署、民國總統府",
                                    title: "中國近代史遺存博物館",
                                    history: "這塊土地的歷史極其厚重，濃縮了中國近代百年的風雲變幻。明朝這裡是漢王府，清朝是康熙乾隆下江南的行宮及兩江總督署。太平天國時期，洪秀全在此建立天王府。1912年，孫中山先生在此就任中華民國臨時大總統。1927年後，成為國民政府及總統府辦公地。",
                                    features: "建築風格極其複雜而精彩，既有江南園林「煦園」的婉約精緻（有鴛鴦亭、石舫等），又有歐式政務大樓「子超樓」的莊嚴肅穆。中軸線上的建築展現了權力的威嚴，而花園則充滿了文人情趣，是中西文化與多個朝代共存的建築標本。",
                                    highlight: "走進「子超樓」，可以看到當年蔣介石、李宗仁的辦公室原貌，那部著名的老式電梯仍保留至今。這裡的每一磚一瓦、每一份文件都在訴說著那個大時代的故事，是必讀的歷史教科書。"
                                }
                            },
                            {
                                name: "南京大屠殺紀念館",
                                timeDisplay: "17:00 閉館",
                                bookingStatus: "待預約",
                                shortDesc: "勿忘國恥，和平之聲",
                                mustVisit: ["萬人坑遺址", "12秒水滴", "和平女神像", "冥思廳"],
                                detail: {
                                    year: "建成於1985年",
                                    title: "中國首批國家一級博物館",
                                    history: "全名為侵華日軍南京大屠殺遇難同胞紀念館，選址於當年日軍大屠殺遺址之一的「江東門萬人坑」。這是一座關於傷痛、記憶、反思與和平的紀念性建築，旨在銘記 1937 年那場慘絕人寰的災難，悼念 30 萬遇難同胞。",
                                    features: "建築設計以「生與死」、「痛與恨」為主題，大量採用灰白石材與碎石，外形如同這片土地上的一塊斷裂的軍刀，營造出壓抑、悲憤但又充滿力量的氛圍。內部設計冷峻肅穆，視覺與心靈的衝擊力極強。史料陳列廳展出了大量珍貴的歷史照片與文物。",
                                    highlight: "著名的「12秒水滴」裝置，每隔12秒滴落一滴水，象徵著在6週的大屠殺期間，平均每12秒就有一個生命消逝。這無聲的滴水聲比任何吶喊都更震撼人心。這裡是每個中國人都應該來一次的地方，銘記歷史，祈願和平。"
                                }
                            }
                        ]
                    },
                    {
                        period: "晚上",
                        spots: [
                            {
                                name: "南京長江大橋",
                                timeDisplay: "全天開放",
                                bookingStatus: null,
                                shortDesc: "中國人的爭氣橋",
                                mustVisit: ["橋頭堡", "公鐵兩用橋面", "玉蘭花路燈", "玻璃棧道"],
                                detail: {
                                    year: "1968年全面通車",
                                    title: "第一座由中國自行設計建造的雙層鐵路、公路兩用橋",
                                    history: "在1960年代中蘇關係破裂、蘇聯撤走專家且物資匱乏的艱難背景下，中國工人和工程師克服重重困難，靠自己的力量建成了這座奇蹟。它不僅是長江上重要的交通樞紐，更是那個時代自力更生、艱苦奮鬥精神的圖騰，被稱為「爭氣橋」。",
                                    features: "大橋分為上下兩層，上層為公路，下層為鐵路。橋頭堡上高聳的工農兵雕塑極具鮮明的時代特色，是那個特定歷史時期的藝術印記。公路兩側排列著 299 根玉蘭花形狀的路燈，每當夜晚齊齊亮燈，如同一條火龍橫跨江面，蔚為壯觀。",
                                    highlight: "站在橋頭堡俯瞰滾滾長江東逝水，百舸爭流，氣勢磅礴。這座橋承載了幾代人的集體記憶，被視為南京乃至中國的驕傲。晚風拂面，看江水滔滔，是感受長江氣魄的絕佳之地。"
                                }
                            }
                        ]
                    }
                ]
            },
            {
                date: "12/31",
                day: "第三天",
                theme: "鍾山風雨",
                sections: [
                    {
                        period: "白天",
                        spots: [
                            {
                                name: "中山陵",
                                timeDisplay: "17:00 閉園",
                                bookingStatus: "待預約",
                                shortDesc: "近代建築史上的第一陵",
                                mustVisit: ["博愛坊", "392級台階", "祭堂坐像", "天下為公匾"],
                                detail: {
                                    year: "建成於1929年",
                                    title: "孫中山先生陵墓，國之聖地",
                                    history: "孫中山先生逝世後，遵照其遺願葬於南京紫金山。陵墓設計通過國際競賽，最終採用了建築師呂彥直的設計方案。它融合了中國古代宮殿建築與西方現代建築美學，摒棄了帝陵幽暗的風格，展現出光明正大的氣象，被譽為「中國近代建築史上的第一陵」。",
                                    features: "整個建築群依山而建，中軸對稱，氣勢宏偉。從空中俯瞰，整個陵墓平面呈「自由鐘」狀，寓意喚起民眾，警鐘長鳴。從博愛坊到祭堂，共有 392 級台階，代表著當時中國的三億九千兩百萬同胞。藍色的琉璃瓦象徵青天，白色的牆壁象徵白日。",
                                    highlight: "登上最高處的祭堂，回望金陵城，視野開闊，豪氣頓生。祭堂內安放著孫中山先生的大理石坐像，是波蘭雕刻家保羅·蘭多斯基的傑作。在這裡，既能感受到建築的莊嚴肅穆，也能緬懷孫中山先生「天下為公」的偉大精神。"
                                }
                            },
                            {
                                name: "明孝陵",
                                timeDisplay: "18:00 閉園",
                                bookingStatus: null,
                                shortDesc: "明清皇家陵寢之首",
                                mustVisit: ["石象路", "文武方門", "方城明樓", "寶頂"],
                                detail: {
                                    year: "始建於西元1381年",
                                    title: "中國古代最大的帝王陵寢之一",
                                    history: "明太祖朱元璋與馬皇后的合葬陵墓。耗費巨資與人力，歷時 30 餘年才建成。作為明朝開國皇帝的陵寢，它具有極高的政治地位。清代康熙、乾隆皇帝下江南時，均曾親往祭掃，行三跪九叩大禮，以示對明朝正統的尊重與籠絡漢族士子之心。",
                                    features: "明孝陵的建築佈局宏大，規制嚴謹。最著名的神道石刻是南京最美的風景之一，尤其是石象路，兩旁的獅、獬豸、駱駝、象、麒麟、馬六種石獸威嚴聳立，配上秋季的梧桐與銀杏，美不勝收。陵寢主體建築採用「前方後圓」的格局，氣勢非凡。",
                                    highlight: "明孝陵開創了明清皇陵「前方後圓」的陵寢規制，對後世五百年的帝陵形制產生了深遠影響，被列為世界文化遺產。登上方城明樓，可以俯瞰整個陵區，感受皇家陵寢的肅穆與自然山水的完美結合。"
                                }
                            },
                            {
                                name: "蔣陵 (孫權墓)",
                                timeDisplay: "全天開放",
                                bookingStatus: null,
                                shortDesc: "三國大帝長眠處",
                                mustVisit: ["梅花山步道", "孫權紀念館", "石像生"],
                                detail: {
                                    year: "三國時期 (約西元252年)",
                                    title: "南京地區最早的帝王陵墓",
                                    history: "位於梅花山，是三國東吳大帝孫權的陵墓。據傳朱元璋建明孝陵時，為了神道的走向，本應遷走孫權墓，但他佩服孫權是條好漢，特意下令「孫權也是一條好漢，留著給我看門吧」，將其保留在神道之側，造就了「明皇與漢帝共一山」的奇觀。",
                                    features: "雖無地上宏偉建築，但梅花山本身就是一座巨大的陵墓封土。這裡如今是南京著名的賞梅勝地，種植了萬株梅花。在花海之下，長眠著這位雄踞江東的霸主，為這片風景增添了厚重的歷史底蘊。",
                                    highlight: "在梅花盛開的季節，花海如雲，香氣襲人。漫步於此，既能欣賞「天下第一梅山」的美景，又能遙想三國英雄的風采，歷史的厚重與自然的浪漫在此交會，令人遐想無限。"
                                }
                            }
                        ]
                    }
                ]
            }
        ];

        // --- Render Helpers ---

        function renderTimeBadge(time) {
            // M3 Assist Chip Style
            const isAlwaysOpen = time.includes("全天") || time.includes("常開");

            // bg-surface-container-high / text-on-surface-variant
            const baseClasses = "inline-flex items-center px-3 py-1.5 rounded-lg text-[11px] font-medium tracking-wide transition-all border border-[#79747e]/20";

            // For closed times/warnings, use Error Container
            const containerClass = isAlwaysOpen
                ? "bg-transparent text-[#49454f]"
                : "bg-[#ffdad6] text-[#410002] border-[#ffdad6]"; // Error Container

            return `
                <span class="${baseClasses} ${containerClass}">
                    <i data-lucide="clock" width="12" class="mr-1.5"></i>
                    ${time}
                </span>
            `;
        }

        function renderBookingBadge(status, note) {
            if (!status && !note) return '';

            // M3 Filter Chip / Suggestion Chip aesthetics
            let bgClass, textClass, icon;

            if (status === "已預約") {
                // Secondary Container
                bgClass = "bg-[#e8def8]";
                textClass = "text-[#1d192b]";
                icon = "check";
            } else if (status === "待預約") {
                // Tertiary Container
                bgClass = "bg-[#ffd8e4]";
                textClass = "text-[#31111d]";
                icon = "alert-circle";
            } else { // 推薦 (Recommend) - Primary Container
                bgClass = "bg-[#eaddff]";
                textClass = "text-[#21005d]";
                icon = "star";
            }

            let html = '<div class="flex flex-col items-end gap-2 mb-2">';

            if (status) {
                html += `
                    <span class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${bgClass} ${textClass}">
                        <i data-lucide="${icon}" width="14" class="mr-1.5"></i>
                        ${status}
                    </span>
                `;
            }

            if (note) {
                // Surface Variant
                html += `
                    <span class="text-[10px] text-[#49454f] bg-[#e7e0ec] px-2 py-1 rounded-md font-medium">
                        ${note}
                    </span>
                `;
            }

            html += '</div>';
            return html;
        }

        function findSpot(name) {
            for (const day of scheduleData) {
                for (const section of day.sections) {
                    for (const spot of section.spots) {
                        if (spot.name === name) return spot;
                    }
                }
            }
            return null;
        }

        // --- Main Render Function ---

        function renderApp() {
            const container = document.getElementById('app-container');
            let html = '';

            scheduleData.forEach((day, dayIdx) => {
                const delayStr = `${dayIdx * 120}ms`;

                html += `
                <div class="fade-in slide-up" style="animation-delay: ${delayStr}">
                    <!-- Date Header (Headline Small) -->
                    <div class="mb-5 pl-1 flex items-baseline gap-3">
                        <span class="text-3xl font-normal text-[#1d1b20]">${day.date}</span>
                        <span class="text-sm font-medium text-[#6750a4] bg-[#e8def8] px-2 py-0.5 rounded-md">${day.day}</span>
                        <span class="text-xs text-[#49454f] font-medium tracking-wide uppercase ml-auto">${day.theme}</span>
                    </div>

                    <!-- Timeline / List items -->
                    <div class="space-y-4 pl-4 border-l-2 border-[#e7e0ec] ml-1.5">
                        ${day.sections.map(section => `
                            <div class="relative">
                                <h3 class="text-xs font-medium text-[#49454f] uppercase tracking-wider mb-2 pl-2">
                                    ${section.period}
                                </h3>

                                <div class="space-y-3">
                                    ${section.spots.map(spot => `
                                        <div onclick="openModal('${spot.name}')"
                                             class="m3-card relative overflow-hidden rounded-[20px] p-4 cursor-pointer">
                                            
                                            <!-- Ripple Target (handled by CSS active state) -->
                                            <div class="flex justify-between items-start">
                                                <div class="flex-1 mr-4">
                                                    <h4 class="text-lg font-medium text-[#1d1b20] mb-1">
                                                        ${spot.name}
                                                    </h4>
                                                    <p class="text-sm text-[#49454f] leading-relaxed mb-3 line-clamp-1">
                                                        ${spot.shortDesc}
                                                    </p>
                                                    ${renderTimeBadge(spot.timeDisplay)}
                                                </div>
                                                
                                                <div class="flex flex-col items-end">
                                                    ${renderBookingBadge(spot.bookingStatus, spot.note)}
                                                    
                                                    <!-- Icon Button (Standard) -->
                                                    <div class="mt-1 w-8 h-8 rounded-full flex items-center justify-center text-[#49454f] bg-[#e7e0ec]/50">
                                                        <i data-lucide="chevron-right" width="20"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                `;
            });

            container.innerHTML = html;
            lucide.createIcons();
        }

        // --- Modal Logic ---

        function openModal(spotName) {
            const spot = findSpot(spotName);
            if (!spot) return;

            const content = document.getElementById('modal-content');
            content.innerHTML = `
                <!-- Header (Headline) -->
                <div class="px-6 pb-6">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1 pr-4">
                            <div class="flex items-center text-[#6750a4] text-[11px] font-medium tracking-widest uppercase mb-1">
                                <i data-lucide="map-pin" width="12" class="mr-1.5"></i>
                                NANJING
                            </div>
                            <h2 class="text-[28px] font-normal text-[#1d1b20] leading-tight mb-2">${spot.name}</h2>
                            <span class="inline-flex items-center bg-[#6750a4] text-white px-2.5 py-1 rounded-md text-xs font-medium">
                                ${spot.detail.year}
                            </span>
                        </div>
                        
                        <!-- Close Button (Icon Button) -->
                        <button onclick="closeModal()" class="w-10 h-10 rounded-full bg-[#f8effc] text-[#49454f] flex items-center justify-center active:bg-[#e7e0ec]">
                            <i data-lucide="x" width="24"></i>
                        </button>
                    </div>

                    <div class="space-y-6 mt-4">
                        <!-- History Section -->
                        <section>
                            <h3 class="text-sm font-medium text-[#6750a4] mb-2">歷史沿革</h3>
                            <p class="text-[15px] text-[#49454f] leading-7 text-justify">
                                ${spot.detail.history}
                            </p>
                        </section>

                        <!-- Must Visit (Secondary Container) -->
                        <section class="bg-[#e8def8]/40 p-5 rounded-[20px]">
                            <h3 class="text-xs font-bold text-[#6750a4] uppercase tracking-wider mb-4 flex items-center">
                                <i data-lucide="eye" width="16" class="mr-2"></i>
                                必看重點
                            </h3>
                            <div class="flex flex-wrap gap-2">
                                ${spot.mustVisit.map(item => `
                                    <div class="bg-[#fef7ff] px-3 py-1.5 rounded-lg shadow-sm border border-[#cac4d0]/20 flex items-center gap-2">
                                        <i data-lucide="camera" width="14" class="text-[#6750a4] shrink-0"></i>
                                        <span class="text-sm text-[#1d1b20]">${item}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </section>

                        <!-- Features & Highlight -->
                        <section>
                            <h3 class="text-sm font-medium text-[#6750a4] mb-2">特色與地位</h3>
                            <p class="text-[15px] text-[#49454f] leading-7 mb-6">
                                ${spot.detail.features}
                            </p>

                            <!-- Highlight Card (Tertiary Container equivalent) -->
                            <div class="bg-[#ffd8e4]/40 p-6 rounded-[24px] text-[#31111d] relative overflow-hidden">
                                <div class="absolute -right-4 -top-4 text-[#ffd8e4] opacity-100 mix-blend-multiply">
                                    <i data-lucide="star" width="80" fill="#ffd8e4" stroke="none"></i>
                                </div>
                                <p class="text-[11px] font-bold text-[#cf1e66] uppercase tracking-widest mb-2 opacity-80">知識精華</p>
                                <p class="text-base font-medium relative z-10 leading-snug">
                                    ${spot.detail.highlight}
                                </p>
                            </div>
                        </section>
                    </div>

                    <!-- Footer Meta -->
                    <div class="mt-8 pt-4 border-t border-[#cac4d0]/30">
                         <div class="inline-flex items-center text-[#410002] bg-[#ffdad6] px-4 py-2 rounded-xl text-sm font-medium">
                            <i data-lucide="clock" width="16" class="mr-2"></i>
                            ${spot.timeDisplay}
                        </div>
                    </div>
                </div>
            `;

            lucide.createIcons();

            const backdrop = document.getElementById('modal-backdrop');
            const sheet = document.getElementById('modal-sheet');

            backdrop.classList.add('backdrop-enter');
            sheet.classList.add('modal-enter');

            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const backdrop = document.getElementById('modal-backdrop');
            const sheet = document.getElementById('modal-sheet');

            backdrop.classList.remove('backdrop-enter');
            sheet.classList.remove('modal-enter');

            setTimeout(() => {
                document.body.style.overflow = '';
            }, 300);
        }

        // Initialize
        renderApp();
    </script>
</body>

</html>
